<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyGo - Ride History</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/sidebar.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --info: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f4f7fc;
            overflow-x: hidden;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .page-title h1 {
            font-size: 32px;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .page-title p {
            color: #666;
            font-size: 14px;
        }

        .export-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .export-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(40, 167, 69, 0.3);
        }

        .history-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s;
        }

        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .summary-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .summary-icon i {
            font-size: 28px;
            color: white;
        }

        .summary-info h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .summary-info .number {
            font-size: 24px;
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 3px;
        }

        .summary-info .sub {
            font-size: 12px;
            color: #999;
        }

        .filters-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .filters-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .filters-title i {
            color: var(--primary);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .filter-group {
            position: relative;
        }

        .filter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 14px;
        }

        .filter-group select, .filter-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
            background: white;
        }

        .filter-group select:focus, .filter-group input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .date-range {
            display: flex;
            gap: 10px;
        }

        .date-range input {
            flex: 1;
        }

        .filter-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .apply-filters {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .apply-filters:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .reset-filters {
            background: #f8f9fa;
            color: #666;
            border: 1px solid #e0e0e0;
            padding: 12px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .reset-filters:hover {
            background: #e9ecef;
        }

        .ride-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .ride-tab {
            padding: 10px 25px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            background: white;
            border: 1px solid #e0e0e0;
            color: #666;
        }

        .ride-tab:hover {
            background: #f8f9fa;
            border-color: var(--primary);
        }

        .ride-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-color: transparent;
        }

        .rides-list {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 30px;
        }

        .ride-item {
            display: flex;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #eee;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .ride-item:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }

        .ride-item:last-child {
            border-bottom: none;
        }

        .ride-date {
            min-width: 80px;
            text-align: center;
            margin-right: 20px;
        }

        .ride-date .day {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary);
            line-height: 1;
        }

        .ride-date .month {
            font-size: 14px;
            color: #666;
            text-transform: uppercase;
        }

        .ride-date .year {
            font-size: 12px;
            color: #999;
        }

        .ride-info {
            flex: 1;
        }

        .ride-route {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }

        .route-points {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .route-points i {
            color: var(--primary);
            font-size: 12px;
        }

        .route-from {
            font-weight: 600;
            color: var(--dark);
        }

        .route-to {
            font-weight: 600;
            color: var(--dark);
        }

        .ride-time {
            color: #666;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .ride-time i {
            font-size: 12px;
            color: #999;
        }

        .ride-details {
            display: flex;
            align-items: center;
            gap: 25px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .ride-detail {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-size: 14px;
        }

        .ride-detail i {
            color: var(--primary);
            width: 16px;
        }

        .ride-status {
            padding: 6px 15px;
            border-radius: 25px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: 20px;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .status-upcoming {
            background: #cce5ff;
            color: #004085;
        }

        .status-ongoing {
            background: #fff3cd;
            color: #856404;
        }

        .ride-actions {
            display: flex;
            gap: 10px;
            margin-left: 20px;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            color: #666;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 30px;
        }

        .page-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .page-btn:hover, .page-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .page-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .modal-header h2 {
            color: var(--dark);
        }

        .modal-close {
            cursor: pointer;
            font-size: 24px;
            color: #999;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: var(--danger);
        }

        .ride-detail-card {
            margin-bottom: 25px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .detail-label {
            color: #666;
            font-weight: 500;
        }

        .detail-value {
            font-weight: 600;
            color: var(--dark);
        }

        .driver-info {
            display: flex;
            align-items: center;
            gap: 20px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .driver-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
        }

        .driver-details h4 {
            margin-bottom: 5px;
            color: var(--dark);
        }

        .driver-details p {
            color: #666;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .driver-rating {
            color: #ffc107;
        }

        .receipt-download {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: all 0.3s;
        }

        .receipt-download:hover {
            background: var(--secondary);
        }

        .no-rides {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 15px;
        }

        .no-rides i {
            font-size: 60px;
            color: #ccc;
            margin-bottom: 20px;
        }

        .no-rides h3 {
            color: #666;
            margin-bottom: 10px;
        }

        .no-rides p {
            color: #999;
            margin-bottom: 20px;
        }

        .book-now-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .book-now-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .page-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .date-range {
                flex-direction: column;
            }

            .ride-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .ride-date {
                margin-right: 0;
                display: flex;
                gap: 5px;
                align-items: baseline;
            }

            .ride-status {
                margin-left: 0;
                align-self: flex-start;
            }

            .ride-actions {
                margin-left: 0;
                width: 100%;
                justify-content: flex-end;
            }

            .ride-details {
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Spinner -->
    <div id="loadingSpinner" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 9999;">
        <div class="loading-spinner"></div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Menu Toggle Button -->
    <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                               <img src="assets/images/easy-Go-Upsaceld-noBG.png" style="width: 100px;" alt="EasyGo">

            </div>
            <button class="sidebar-close" id="sidebarClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="user-info">
            <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User" class="user-avatar" id="userAvatar">
            <div class="user-details">
                <h4 class="user-name" id="userName">Thabo Nkosi</h4>
                <p class="user-email" id="userEmail">thabo.nkosi@example.com</p>
                <span class="user-badge" id="userBadge">Premium Member</span>
            </div>
        </div>
        
        <div class="sidebar-search">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Search...">
        </div>
        
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="rider-dashboard.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="ride-booking.html" class="nav-link">
                    <i class="fas fa-car"></i>
                    <span>Book a Ride</span>
                    <span class="nav-badge">New</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="ride-history.html" class="nav-link active">
                    <i class="fas fa-history"></i>
                    <span>Ride History</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="rider-payments.html" class="nav-link">
                    <i class="fas fa-wallet"></i>
                    <span>Payments</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="profile.html" class="nav-link">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="rider-notifications.html" class="nav-link">
                    <i class="fas fa-bell"></i>
                    <span>Notifications</span>
                    <span class="nav-badge notification-dot"></span>
                </a>
            </li>
            <li class="nav-item">
                <a href="rider-support.html" class="nav-link">
                    <i class="fas fa-headset"></i>
                    <span>Support</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="settings.html" class="nav-link">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </li>
            <li class="nav-item logout-item">
                <a href="javascript:void(0)" class="nav-link" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>

        <div class="sidebar-footer">
            <div class="sidebar-progress">
                <div class="progress-info">
                    <span>Ride Points</span>
                    <span>750/1000</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 75%"></div>
                </div>
            </div>
            <div class="sidebar-help" onclick="window.location.href='support.html'">
                <i class="fas fa-question-circle"></i>
                <span>Need Help?</span>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-title">
                    <h1>Ride History</h1>
                    <p>View and manage all your past, current and upcoming rides</p>
                </div>
                <button class="export-btn" onclick="exportHistory()">
                    <i class="fas fa-download"></i> Export History
                </button>
            </div>

            <!-- Summary Cards -->
            <div class="history-summary">
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-car"></i>
                    </div>
                    <div class="summary-info">
                        <h3>Total Rides</h3>
                        <div class="number" id="totalRides">128</div>
                        <div class="sub">All time</div>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-road"></i>
                    </div>
                    <div class="summary-info">
                        <h3>Total Distance</h3>
                        <div class="number" id="totalDistance">2,450 km</div>
                        <div class="sub">~19.1 km per ride</div>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="summary-info">
                        <h3>Total Time</h3>
                        <div class="number" id="totalTime">85 hrs</div>
                        <div class="sub">~40 min per ride</div>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="summary-info">
                        <h3>Total Spent</h3>
                        <div class="number" id="totalSpent">R 38,450</div>
                        <div class="sub">Average R 300 per ride</div>
                    </div>
                </div>
            </div>

            <!-- Filters Section -->
            <div class="filters-section">
                <div class="filters-title">
                    <i class="fas fa-filter"></i>
                    <h3>Filter Rides</h3>
                </div>
                
                <div class="filters-grid">
                    <div class="filter-group">
                        <label>Ride Type</label>
                        <select id="rideTypeFilter">
                            <option value="all">All Types</option>
                            <option value="economy">Economy</option>
                            <option value="comfort">Comfort</option>
                            <option value="luxury">Luxury</option>
                            <option value="xl">XL</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>Status</label>
                        <select id="statusFilter">
                            <option value="all">All Status</option>
                            <option value="completed">Completed</option>
                            <option value="upcoming">Upcoming</option>
                            <option value="ongoing">Ongoing</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>Date Range</label>
                        <div class="date-range">
                            <input type="date" id="startDate" placeholder="Start Date">
                            <input type="date" id="endDate" placeholder="End Date">
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <label>Sort By</label>
                        <select id="sortBy">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                            <option value="highest">Highest Price</option>
                            <option value="lowest">Lowest Price</option>
                        </select>
                    </div>
                </div>
                
                <div class="filter-actions">
                    <button class="reset-filters" onclick="resetFilters()">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                    <button class="apply-filters" onclick="applyFilters()">
                        <i class="fas fa-search"></i> Apply Filters
                    </button>
                </div>
            </div>

            <!-- Ride Tabs -->
            <div class="ride-tabs">
                <div class="ride-tab active" onclick="switchTab('all', this)">All Rides</div>
                <div class="ride-tab" onclick="switchTab('completed', this)">Completed</div>
                <div class="ride-tab" onclick="switchTab('upcoming', this)">Upcoming</div>
                <div class="ride-tab" onclick="switchTab('ongoing', this)">Ongoing</div>
                <div class="ride-tab" onclick="switchTab('cancelled', this)">Cancelled</div>
            </div>

            <!-- Rides List -->
            <div class="rides-list" id="ridesList">
                <!-- Rides will be loaded here dynamically -->
            </div>

            <!-- Pagination -->
            <div class="pagination" id="pagination">
                <div class="page-btn disabled" onclick="changePage('prev')">
                    <i class="fas fa-chevron-left"></i>
                </div>
                <div class="page-btn active">1</div>
                <div class="page-btn">2</div>
                <div class="page-btn">3</div>
                <div class="page-btn">4</div>
                <div class="page-btn">5</div>
                <div class="page-btn" onclick="changePage('next')">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Ride Details Modal -->
    <div class="modal" id="rideModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ride Details</h2>
                <span class="modal-close" onclick="closeModal()">&times;</span>
            </div>
            <div id="rideDetailsContent">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>
    </div>

    <script src="assets/js/auth.js"></script>
    <script src="assets/js/sidebar.js"></script>
    <script>
        // Sample ride data
        const ridesData = [
            {
                id: 1,
                date: '2024-11-20',
                time: '09:30',
                from: 'Sandton City',
                to: 'OR Tambo International Airport',
                driver: {
                    name: 'Sipho Dlamini',
                    car: 'Toyota Corolla',
                    plate: 'GP 12 ABC GP',
                    rating: 4.9,
                    avatar: 'https://randomuser.me/api/portraits/men/32.jpg'
                },
                price: 350,
                distance: 35,
                duration: 45,
                status: 'completed',
                type: 'economy',
                paymentMethod: 'Credit Card',
                rating: 5
            },
            {
                id: 2,
                date: '2024-11-19',
                time: '18:45',
                from: 'Melrose Arch',
                to: 'Fourways Mall',
                driver: {
                    name: 'John Mokoena',
                    car: 'VW Polo',
                    plate: 'GP 34 XYZ GP',
                    rating: 4.8,
                    avatar: 'https://randomuser.me/api/portraits/men/33.jpg'
                },
                price: 180,
                distance: 18,
                duration: 25,
                status: 'completed',
                type: 'comfort',
                paymentMethod: 'EasyGo Wallet',
                rating: 4
            },
            {
                id: 3,
                date: '2024-11-18',
                time: '22:15',
                from: 'Gateway Theatre',
                to: 'Umhlanga Ridge',
                driver: {
                    name: 'Nomsa Zulu',
                    car: 'Ford Focus',
                    plate: 'NL 56 CD NL',
                    rating: 4.9,
                    avatar: 'https://randomuser.me/api/portraits/women/44.jpg'
                },
                price: 120,
                distance: 12,
                duration: 20,
                status: 'cancelled',
                type: 'economy',
                paymentMethod: 'Cash',
                rating: null
            },
            {
                id: 4,
                date: '2024-11-25',
                time: '08:00',
                from: '15 Sandton Drive, Sandton',
                to: '30 Alice Lane, Sandton',
                driver: {
                    name: 'Peter Smith',
                    car: 'BMW 3 Series',
                    plate: 'GP 78 EF GP',
                    rating: 4.7,
                    avatar: 'https://randomuser.me/api/portraits/men/45.jpg'
                },
                price: 85,
                distance: 8,
                duration: 15,
                status: 'upcoming',
                type: 'luxury',
                paymentMethod: 'Credit Card',
                rating: null
            },
            {
                id: 5,
                date: '2024-11-26',
                time: '17:30',
                from: '30 Alice Lane, Sandton',
                to: 'Virgin Active, Sandton City',
                driver: {
                    name: 'Thabo Nkosi',
                    car: 'Mercedes C-Class',
                    plate: 'GP 90 GH GP',
                    rating: 4.9,
                    avatar: 'https://randomuser.me/api/portraits/men/46.jpg'
                },
                price: 65,
                distance: 6,
                duration: 12,
                status: 'upcoming',
                type: 'comfort',
                paymentMethod: 'EasyGo Wallet',
                rating: null
            },
            {
                id: 6,
                date: '2024-11-22',
                time: '14:20',
                from: 'V&A Waterfront',
                to: 'Cape Town International Airport',
                driver: {
                    name: 'Linda van der Merwe',
                    car: 'Audi A4',
                    plate: 'CP 12 AB CP',
                    rating: 4.8,
                    avatar: 'https://randomuser.me/api/portraits/women/47.jpg'
                },
                price: 280,
                distance: 22,
                duration: 30,
                status: 'ongoing',
                type: 'luxury',
                paymentMethod: 'PayPal',
                rating: null
            }
        ];

        let currentTab = 'all';
        let currentPage = 1;
        const itemsPerPage = 5;
        let filteredRides = [...ridesData];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadRides();
            updateSummary();
        });

        // Load rides
        function loadRides() {
            const ridesList = document.getElementById('ridesList');
            if (!ridesList) return;

            const paginatedRides = paginateRides(filteredRides);

            if (paginatedRides.length === 0) {
                ridesList.innerHTML = `
                    <div class="no-rides">
                        <i class="fas fa-car"></i>
                        <h3>No rides found</h3>
                        <p>Try adjusting your filters or book a new ride</p>
                        <button class="book-now-btn" onclick="window.location.href='ride-booking.html'">
                            Book a Ride Now
                        </button>
                    </div>
                `;
                return;
            }

            ridesList.innerHTML = '';
            paginatedRides.forEach(ride => {
                ridesList.appendChild(createRideElement(ride));
            });

            updatePagination(filteredRides.length);
        }

        // Create ride element
        function createRideElement(ride) {
            const div = document.createElement('div');
            div.className = 'ride-item';
            div.onclick = () => showRideDetails(ride);

            const rideDate = new Date(ride.date);
            const day = rideDate.getDate().toString().padStart(2, '0');
            const month = rideDate.toLocaleString('default', { month: 'short' });
            const year = rideDate.getFullYear();

            div.innerHTML = `
                <div class="ride-date">
                    <div class="day">${day}</div>
                    <div class="month">${month}</div>
                    <div class="year">${year}</div>
                </div>
                
                <div class="ride-info">
                    <div class="ride-route">
                        <div class="route-points">
                            <span class="route-from">${ride.from}</span>
                            <i class="fas fa-arrow-right"></i>
                            <span class="route-to">${ride.to}</span>
                        </div>
                        <div class="ride-time">
                            <i class="far fa-clock"></i>
                            <span>${ride.time}</span>
                        </div>
                    </div>
                    
                    <div class="ride-details">
                        <div class="ride-detail">
                            <i class="fas fa-user"></i>
                            <span>${ride.driver.name}</span>
                        </div>
                        <div class="ride-detail">
                            <i class="fas fa-road"></i>
                            <span>${ride.distance} km</span>
                        </div>
                        <div class="ride-detail">
                            <i class="fas fa-clock"></i>
                            <span>${ride.duration} min</span>
                        </div>
                        <div class="ride-detail">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>R ${ride.price}</span>
                        </div>
                    </div>
                </div>
                
                <span class="ride-status status-${ride.status}">${ride.status}</span>
                
                <div class="ride-actions" onclick="event.stopPropagation()">
                    ${ride.status === 'completed' ? `
                        <button class="action-btn" onclick="rateRide(${ride.id})" title="Rate ride">
                            <i class="fas fa-star"></i>
                        </button>
                    ` : ride.status === 'upcoming' ? `
                        <button class="action-btn" onclick="cancelRide(${ride.id})" title="Cancel ride">
                            <i class="fas fa-times"></i>
                        </button>
                    ` : ''}
                    <button class="action-btn" onclick="repeatRide(${ride.id})" title="Book again">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button class="action-btn" onclick="downloadReceipt(${ride.id})" title="Download receipt">
                        <i class="fas fa-download"></i>
                    </button>
                </div>
            `;

            return div;
        }

        // Paginate rides
        function paginateRides(rides) {
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            return rides.slice(start, end);
        }

        // Update pagination
        function updatePagination(totalItems) {
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            const pagination = document.getElementById('pagination');
            
            if (!pagination) return;

            let paginationHTML = `
                <div class="page-btn ${currentPage === 1 ? 'disabled' : ''}" onclick="changePage('prev')">
                    <i class="fas fa-chevron-left"></i>
                </div>
            `;

            for (let i = 1; i <= totalPages; i++) {
                paginationHTML += `
                    <div class="page-btn ${i === currentPage ? 'active' : ''}" onclick="goToPage(${i})">
                        ${i}
                    </div>
                `;
            }

            paginationHTML += `
                <div class="page-btn ${currentPage === totalPages ? 'disabled' : ''}" onclick="changePage('next')">
                    <i class="fas fa-chevron-right"></i>
                </div>
            `;

            pagination.innerHTML = paginationHTML;
        }

        // Change page
        function changePage(direction) {
            const totalPages = Math.ceil(filteredRides.length / itemsPerPage);
            
            if (direction === 'prev' && currentPage > 1) {
                currentPage--;
                loadRides();
            } else if (direction === 'next' && currentPage < totalPages) {
                currentPage++;
                loadRides();
            }
        }

        // Go to specific page
        function goToPage(page) {
            currentPage = page;
            loadRides();
        }

        // Update summary
        function updateSummary() {
            const totalRides = ridesData.length;
            const totalDistance = ridesData.reduce((sum, ride) => sum + ride.distance, 0);
            const totalDuration = ridesData.reduce((sum, ride) => sum + ride.duration, 0);
            const totalSpent = ridesData.reduce((sum, ride) => sum + ride.price, 0);

            document.getElementById('totalRides').textContent = totalRides;
            document.getElementById('totalDistance').textContent = totalDistance.toLocaleString() + ' km';
            document.getElementById('totalTime').textContent = Math.round(totalDuration / 60) + ' hrs';
            document.getElementById('totalSpent').textContent = 'R ' + totalSpent.toLocaleString();
        }

        // Switch tab
        function switchTab(tab, element) {
            currentTab = tab;
            currentPage = 1;

            // Update UI
            document.querySelectorAll('.ride-tab').forEach(t => {
                t.classList.remove('active');
            });
            element.classList.add('active');

            // Apply filter
            applyFilters();
        }

        // Apply filters
        function applyFilters() {
            const typeFilter = document.getElementById('rideTypeFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const sortBy = document.getElementById('sortBy').value;

            filteredRides = ridesData.filter(ride => {
                // Filter by tab
                if (currentTab !== 'all' && ride.status !== currentTab) return false;

                // Filter by type
                if (typeFilter !== 'all' && ride.type !== typeFilter) return false;

                // Filter by status (if not already filtered by tab)
                if (statusFilter !== 'all' && ride.status !== statusFilter && currentTab === 'all') return false;

                // Filter by date range
                if (startDate && ride.date < startDate) return false;
                if (endDate && ride.date > endDate) return false;

                return true;
            });

            // Sort
            switch(sortBy) {
                case 'newest':
                    filteredRides.sort((a, b) => new Date(b.date) - new Date(a.date));
                    break;
                case 'oldest':
                    filteredRides.sort((a, b) => new Date(a.date) - new Date(b.date));
                    break;
                case 'highest':
                    filteredRides.sort((a, b) => b.price - a.price);
                    break;
                case 'lowest':
                    filteredRides.sort((a, b) => a.price - b.price);
                    break;
            }

            currentPage = 1;
            loadRides();
            
            showToast('Filters Applied', 'Ride list has been updated', 'success');
        }

        // Reset filters
        function resetFilters() {
            document.getElementById('rideTypeFilter').value = 'all';
            document.getElementById('statusFilter').value = 'all';
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            document.getElementById('sortBy').value = 'newest';

            filteredRides = [...ridesData];
            currentPage = 1;
            loadRides();

            showToast('Filters Reset', 'All filters have been cleared', 'info');
        }

        // Show ride details
        function showRideDetails(ride) {
            const modal = document.getElementById('rideModal');
            const content = document.getElementById('rideDetailsContent');

            const rideDate = new Date(ride.date);
            const formattedDate = rideDate.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });

            content.innerHTML = `
                <div class="ride-detail-card">
                    <div class="detail-row">
                        <span class="detail-label">Date & Time</span>
                        <span class="detail-value">${formattedDate} at ${ride.time}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">From</span>
                        <span class="detail-value">${ride.from}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">To</span>
                        <span class="detail-value">${ride.to}</span>
                    </div>
                </div>

                <div class="driver-info">
                    <img src="${ride.driver.avatar}" alt="${ride.driver.name}" class="driver-avatar">
                    <div class="driver-details">
                        <h4>${ride.driver.name}</h4>
                        <p>${ride.driver.car} • ${ride.driver.plate}</p>
                        <div class="driver-rating">
                            ${getStarRating(ride.driver.rating)} ${ride.driver.rating}
                        </div>
                    </div>
                </div>

                <div class="ride-detail-card">
                    <div class="detail-row">
                        <span class="detail-label">Ride Type</span>
                        <span class="detail-value">${ride.type.charAt(0).toUpperCase() + ride.type.slice(1)}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Distance</span>
                        <span class="detail-value">${ride.distance} km</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Duration</span>
                        <span class="detail-value">${ride.duration} minutes</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Payment Method</span>
                        <span class="detail-value">${ride.paymentMethod}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Fare</span>
                        <span class="detail-value">R ${ride.price}</span>
                    </div>
                    ${ride.rating ? `
                        <div class="detail-row">
                            <span class="detail-label">Your Rating</span>
                            <span class="detail-value">${'★'.repeat(ride.rating)}${'☆'.repeat(5 - ride.rating)}</span>
                        </div>
                    ` : ''}
                </div>

                <button class="receipt-download" onclick="downloadReceipt(${ride.id})">
                    <i class="fas fa-download"></i> Download Receipt
                </button>
            `;

            modal.classList.add('show');
        }

        // Close modal
        function closeModal() {
            document.getElementById('rideModal').classList.remove('show');
        }

        // Rate ride
        function rateRide(rideId) {
            showToast('Rate Ride', 'Thank you for rating this ride!', 'success');
        }

        // Cancel ride
        function cancelRide(rideId) {
            if (confirm('Are you sure you want to cancel this ride?')) {
                showToast('Ride Cancelled', 'Your ride has been cancelled successfully', 'warning');
            }
        }

        // Repeat ride
        function repeatRide(rideId) {
            const ride = ridesData.find(r => r.id === rideId);
            showToast('Booking Again', `Booking ride from ${ride.from} to ${ride.to}`, 'success');
            setTimeout(() => {
                window.location.href = `ride-booking.html?from=${encodeURIComponent(ride.from)}&to=${encodeURIComponent(ride.to)}`;
            }, 1500);
        }

        // Download receipt
        function downloadReceipt(rideId) {
            const ride = ridesData.find(r => r.id === rideId);
            showToast('Download Receipt', `Receipt for ride to ${ride.to} is being downloaded`, 'success');
        }

        // Export history
        function exportHistory() {
            showToast('Exporting', 'Your ride history is being exported to CSV', 'success');
        }

        // Get star rating HTML
        function getStarRating(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= Math.floor(rating)) {
                    stars += '<i class="fas fa-star"></i>';
                } else if (i - rating < 1 && i - rating > 0) {
                    stars += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            return stars;
        }

        // Show loading
        function showLoading() {
            document.getElementById('loadingSpinner').style.display = 'block';
        }

        // Hide loading
        function hideLoading() {
            document.getElementById('loadingSpinner').style.display = 'none';
        }

        // Toast function
        function showToast(title, message, type = 'info') {
            const container = document.getElementById('toastContainer');
            if (!container) return;
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icon = type === 'success' ? 'check-circle' : 
                        type === 'error' ? 'exclamation-circle' : 
                        type === 'warning' ? 'exclamation-triangle' : 'info-circle';
            
            toast.innerHTML = `
                <i class="fas fa-${icon}"></i>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <i class="fas fa-times toast-close" onclick="this.parentElement.remove()"></i>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 5000);
        }
    </script>
</body>
</html>